<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .main{
            width: 650px;
            height: 600px;
            position: relative;
            margin: 0 auto;
            background: url("./img/turntable-bg.jpg") no-repeat left top;
            background-size: cover;
        }
        .rotate{
            position: absolute;
            width: 450px;
            height: 450px;
            left: 116px;
            top: 60px;
            z-index: 2;
            transition: transform 3s ease-in-out;
        }
        .rotate>img{
            width: 100%;
            height: 100%;
            vertical-align: middle;
        }
        .pointer{
            position: absolute;
            z-index: 3;
            width: 174px;
            height: 228px;
            left: 50%;
            top: 50%;
            margin-left: -67px;
            margin-top: -144px;
        }
        .pointer>img{
            width: 100%;
            height: 100%;
            vertical-align: middle;
        }
    </style>
</head>
<body>
<div class="main">
    <div class="pointer">
        <img src="./img/pointer.png" alt=""/>
    </div>
    <div class="rotate">
        <img src="./img/turntable.png" alt=""/>
    </div>
</div>
<script>
    //先建立所有奖品的集合
    var list=['免单4999元', '免单50元', '免单10元', '免单5元', '免分期服务费', '提高白条额度', '未中奖'];
    //抽奖的状态
    var isStart=true;
    //获得奖品的索引
    var index=null;
    //当前的奖品
    var nowTxt=null;
    //点击抽奖
    var pointer=document.querySelector(".pointer");
    //获取rotate
    var rotate=document.querySelector(".rotate");
    //默认转的度数
    var defaultAngle=1800;//默认转五圈
    var angle=360/list.length;
    pointer.onclick=function(){
        if(isStart){
            //开始抽奖
            isStart=false;
            index=getinfo();
            nowTxt=list[index];
            var agl=index*angle+defaultAngle+Math.random()*angle;
            rotate.style.transform="rotatez("+agl+"deg)";
            setTimeout(function(){
                alert("奖品："+nowTxt);
                isStart=true;
            },3000)
        }
    }
    function getinfo(){
        var num=Math.random();
        var i=null;
        if(num<0.03){
            i=0;
        }
        else if(num<0.1){
            i=1;
        }
        else if(num<0.2)
        {
            i=2;//10%
        }
        else if(num<0.35)
        {
            i=3;//15%
        }
        else if(num<0.55)
        {
            i=4;//20%
        }
        else if(num<0.85)
        {
            i=5;//30%
        }
        else{
            i=6;
        }
        return i;
    }
</script>
</body>
</html>